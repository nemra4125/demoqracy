{% extends "base.html" %}

{% block page_title %}Candidates for Election {{ title }}{% endblock %}

{% block javascript_head %}
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script src="/_ah/channel/jsapi" type="text/javascript"></script>
  <script src="/static/javascript/view.js" type="text/javascript"></script>
  <script type="text/javascript">
    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(function() {
      drawChart({{ election_state|safe }});
    });

    {% if election_is_active %}
      var electionId = '{{ election_id }}';
    {% endif %}
  </script>
{% endblock javascript_head %}

{% block content %}
  <h3>{{ title }}</h3>
  {% for candidate in candidates %}
    <p><a href="/{{ election_id }}/{{ candidate.id }}/vote">{{ candidate.name }}</a> has {{ candidate.votes }} vote{% if candidate.votes != 1 %}s{% endif %}.</p>
  {% endfor %}
  <div data-tech-name="Google Chart Tools" data-tech-url="static/javascript/view.js#5">
    <img src="/static/images/icons/printer.png" class="flanker_icon" data-tech-name="QR Code Generation" data-tech-url="templates/print.html#15">
    <a href="/elections/{{ election_id }}/print" class="big_link" target="_blank">Print Barcodes</a>
  </div>
  <div>
    <img src="/static/images/icons/printer.png" class="flanker_icon" />
    <a href="/elections/{{ election_id }}/history" class="big_link">View Vote History</a>
  </div>
  <div id="charts_div" style="margin-top: 10px">
    <div class="box flex_column_item">
      <div class="box_header">Vote Percentage</div>
      <div>
        <span id="pie-chart"></span>
      </div>
    </div>
    <div class="box flex_column_item">
      <div class="box_header">Total Votes</div>
      <div>
        <span id="bar-chart"></span>
      </div>
    </div>
  </div>
{% endblock content %}