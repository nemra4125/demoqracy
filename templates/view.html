{% set needs_jquery = True %}
{% extends "base.html" %}

{% block page_title %}Candidates for Election {{ title }}{% endblock %}

{% block javascript_head %}
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <script src="/_ah/channel/jsapi" type="text/javascript"></script>
  <script src="/static/javascript/view.js" type="text/javascript"></script>
  <script type="text/javascript">
    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(function() {
      drawChart({{ election_state|safe }});
    });

    {% if election_is_active %}
      var electionId = '{{ election_id }}';
    {% endif %}
  </script>
{% endblock javascript_head %}

{% block content %}
  {% for candidate in candidates %}
    <p><a href="/{{ election_id }}/{{ candidate.id }}/vote">{{ candidate.name }}</a> has {{ candidate.votes }} vote{% if candidate.votes != 1 %}s{% endif %}.</p>
  {% endfor %}
  <div id="charts"></div>
{% endblock content %}